[gd_scene format=3 uid="uid://c35xqt2nqbecb"]

[ext_resource type="Script" uid="uid://bi3md3unr3sa8" path="res://scenes/player/player.gd" id="1_8afob"]
[ext_resource type="PackedScene" uid="uid://b2t4nscqkub6l" path="res://scenes/player/player_dead.tscn" id="2_0owmy"]
[ext_resource type="PackedScene" uid="uid://cdfetrgmxtpxs" path="res://menus/interface.tscn" id="2_75vfm"]
[ext_resource type="SpriteFrames" uid="uid://b3esrjopmp6pt" path="res://art/entities/Legs.tres" id="2_gmlin"]
[ext_resource type="SpriteFrames" uid="uid://kpftjh6ywxev" path="res://art/entities/Body.tres" id="3_lvxji"]
[ext_resource type="Shader" uid="uid://cd0q8jdhx5vpx" path="res://shaders/flash.gdshader" id="3_p47bc"]
[ext_resource type="Script" uid="uid://dsyyefxytmf6d" path="res://scenes/animated_sprite_flash.gd" id="5_p47bc"]
[ext_resource type="Texture2D" uid="uid://c7sh05vbygiia" path="res://art/entities/PlayerAttackEffect.png" id="6_75vfm"]
[ext_resource type="AudioStream" uid="uid://sowh21mrf481" path="res://assets/sounds/footstep_randomizer.tres" id="8_5gtgg"]
[ext_resource type="Texture2D" uid="uid://c733b3h88vgop" path="res://art/sprites/light_stronger.png" id="10_h17s1"]
[ext_resource type="Script" uid="uid://dj3a5ixluat1v" path="res://scenes/player/mask_attach_parent.gd" id="11_fm80t"]
[ext_resource type="AudioStream" uid="uid://b1thiosmou6ai" path="res://assets/sounds/waepon_swing_randomizer.tres" id="12_fm80t"]
[ext_resource type="AudioStream" uid="uid://bvo8f70jomtvb" path="res://assets/sounds/player hiy 1.wav" id="13_myrg7"]
[ext_resource type="AudioStream" uid="uid://b2u73vmn18ns5" path="res://assets/sounds/player hit 2.wav" id="14_kvlxm"]
[ext_resource type="AudioStream" uid="uid://dimqqwq6neqmp" path="res://assets/sounds/player hit 3.wav" id="15_uf5tr"]
[ext_resource type="AudioStream" uid="uid://d2dytuujs2a65" path="res://assets/sounds/player hit 4.wav" id="16_lgqa7"]
[ext_resource type="Script" uid="uid://c1v05nxhheku1" path="res://scenes/player/mobile_controls_layer.gd" id="17_kvlxm"]
[ext_resource type="Texture2D" uid="uid://dyjwiopfdomqm" path="res://art/sprites/CrowbarHit.png" id="18_uf5tr"]
[ext_resource type="Texture2D" uid="uid://cajj6i4uyeuo2" path="res://art/sprites/ControlCircleOuter.png" id="19_lgqa7"]
[ext_resource type="Texture2D" uid="uid://mkqpgpoy01ib" path="res://art/sprites/ControlCircleInner.png" id="20_8ydkj"]
[ext_resource type="Texture2D" uid="uid://vy34qwgfc4qt" path="res://art/sprites/Pause.png" id="21_3j4b4"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_x7p2l"]
radius = 3.0
height = 16.0

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_x7p2l"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_75vfm"]
shader = ExtResource("3_p47bc")
shader_parameter/flash_color = Color(1, 1, 1, 1)
shader_parameter/flash = 0.0

[sub_resource type="CircleShape2D" id="CircleShape2D_gmlin"]
radius = 21.0

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_8ydkj"]
streams_count = 4
stream_0/stream = ExtResource("13_myrg7")
stream_1/stream = ExtResource("14_kvlxm")
stream_2/stream = ExtResource("15_uf5tr")
stream_3/stream = ExtResource("16_lgqa7")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_3j4b4"]
bg_color = Color(1, 1, 1, 0)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_yj68g"]
bg_color = Color(0, 0, 0, 0.101960786)

[node name="Player" type="CharacterBody2D" unique_id=2059150865 node_paths=PackedStringArray("legs", "body", "attack_effect", "footstep_sound_player", "mask_attach_parent", "attack_swing_sounds", "hit_sounds")]
collision_layer = 2
collision_mask = 11
platform_on_leave = 2
script = ExtResource("1_8afob")
speed = 150.0
pushback_force = 100.0
legs = NodePath("PlayerLegs")
body = NodePath("PlayerBody")
attack_effect = NodePath("PlayerAttackEffect")
death_scene = ExtResource("2_0owmy")
footstep_sound_player = NodePath("RunningOnConcrete")
mask_attach_parent = NodePath("MaskAttachParent")
point_light_scale_per_mask_count = Array[float]([0.6, 0.75, 0.9, 1.1])
attack_swing_sounds = NodePath("AttackSwingSounds")
hit_sounds = NodePath("HitSounds")

[node name="CanvasLayer" type="CanvasLayer" parent="." unique_id=25187191]

[node name="Interface" parent="CanvasLayer" unique_id=55518087 instance=ExtResource("2_75vfm")]
z_index = 20
mouse_filter = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="." unique_id=1297313665]
rotation = 1.5707964
shape = SubResource("CapsuleShape2D_x7p2l")

[node name="Sprite2D" type="Sprite2D" parent="." unique_id=836232678]
visible = false
position = Vector2(-0.21500014, -14.345)
scale = Vector2(19.57, 29.31)
texture = SubResource("PlaceholderTexture2D_x7p2l")

[node name="Camera2D" type="Camera2D" parent="." unique_id=1551943026]
offset = Vector2(0, -16)
zoom = Vector2(4, 4)

[node name="PlayerLegs" type="AnimatedSprite2D" parent="." unique_id=1129114372]
material = SubResource("ShaderMaterial_75vfm")
sprite_frames = ExtResource("2_gmlin")
animation = &"Walk"
autoplay = "Idle"
speed_scale = 1.5
offset = Vector2(0, -16)

[node name="PlayerBody" type="AnimatedSprite2D" parent="." unique_id=1992899017]
material = SubResource("ShaderMaterial_75vfm")
sprite_frames = ExtResource("3_lvxji")
animation = &"Idle"
autoplay = "Idle"
offset = Vector2(0, -16)
script = ExtResource("5_p47bc")

[node name="AttackArea" type="Area2D" parent="." unique_id=2133087784]
collision_layer = 0
collision_mask = 12
monitoring = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackArea" unique_id=1825847568]
visible = false
position = Vector2(23, -10)
shape = SubResource("CircleShape2D_gmlin")
debug_color = Color(0.9804799, 0, 0.3832885, 0.41960785)

[node name="RunningOnConcrete" type="AudioStreamPlayer2D" parent="." unique_id=1037543377]
stream = ExtResource("8_5gtgg")

[node name="InvincibilityTimer" type="Timer" parent="." unique_id=1311828866]
wait_time = 0.5
one_shot = true

[node name="PlayerAttackEffect" type="Sprite2D" parent="." unique_id=1546744407]
visible = false
texture = ExtResource("6_75vfm")
offset = Vector2(0, -16)

[node name="PointLight2D" type="PointLight2D" parent="." unique_id=1023919364]
texture = ExtResource("10_h17s1")
offset = Vector2(0, -16)
texture_scale = 0.61

[node name="MaskAttachParent" type="Node2D" parent="." unique_id=1037009732 node_paths=PackedStringArray("animated_sprite")]
script = ExtResource("11_fm80t")
anim_idle_offsets = Array[Vector2]([Vector2(0, 0), Vector2(0, -1), Vector2(0, -2), Vector2(0, -1)])
anim_attack_offsets = Array[Vector2]([Vector2(0, 1), Vector2(1, 1)])
anim_walk_offsets = Array[Vector2]([Vector2(0, 0), Vector2(0, 0), Vector2(0, 0), Vector2(0, 0)])
anim_hit_offsets = Array[Vector2]([Vector2(-1, 1)])
animated_sprite = NodePath("../PlayerBody")

[node name="AttackSwingSounds" type="AudioStreamPlayer2D" parent="." unique_id=1033397576]
stream = ExtResource("12_fm80t")
volume_db = -4.0

[node name="HitSounds" type="AudioStreamPlayer2D" parent="." unique_id=802370422]
stream = SubResource("AudioStreamRandomizer_8ydkj")
volume_db = 5.939

[node name="MobileControlsLayer" type="CanvasLayer" parent="." unique_id=753327299 node_paths=PackedStringArray("control_frame", "control_knob", "control_center", "interface", "attack_button")]
process_mode = 3
script = ExtResource("17_kvlxm")
control_frame = NodePath("Control/ControlFrame")
control_knob = NodePath("Control/ControlFrame/ControlKnob")
control_center = NodePath("Control/ControlFrame/ControlCenter")
interface = NodePath("../CanvasLayer/Interface")
attack_button = NodePath("Control/AttackButton")

[node name="Control" type="Control" parent="MobileControlsLayer" unique_id=1454643870]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="AttackButton" type="Button" parent="MobileControlsLayer/Control" unique_id=954084157]
modulate = Color(1, 1, 1, 0.5882353)
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -185.0
offset_top = -185.0
offset_right = -57.0
offset_bottom = -57.0
grow_horizontal = 0
grow_vertical = 0
theme_override_styles/normal = SubResource("StyleBoxFlat_3j4b4")
action_mode = 0
icon = ExtResource("18_uf5tr")
icon_alignment = 1
expand_icon = true

[node name="ControlFrame" type="TextureRect" parent="MobileControlsLayer/Control" unique_id=341926021]
modulate = Color(1, 1, 1, 0.5882353)
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 64.0
offset_top = -192.0
offset_right = 192.0
offset_bottom = -64.00006
grow_vertical = 0
texture = ExtResource("19_lgqa7")

[node name="ControlKnob" type="TextureRect" parent="MobileControlsLayer/Control/ControlFrame" unique_id=1416054785]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -64.0
offset_top = -64.0
offset_right = 64.0
offset_bottom = 64.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(64, 64)
texture = ExtResource("20_8ydkj")

[node name="ControlCenter" type="Control" parent="MobileControlsLayer/Control/ControlFrame" unique_id=1873990825]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2

[node name="Button" type="Button" parent="MobileControlsLayer/Control" unique_id=220848989]
modulate = Color(1, 1, 1, 0.39215687)
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -64.0
offset_bottom = 64.0
grow_horizontal = 0
theme_override_styles/normal = SubResource("StyleBoxFlat_yj68g")
icon = ExtResource("21_3j4b4")
icon_alignment = 1
expand_icon = true

[connection signal="frame_changed" from="PlayerLegs" to="." method="_on_player_legs_frame_changed"]
[connection signal="animation_finished" from="PlayerBody" to="." method="_on_player_body_animation_finished"]
[connection signal="frame_changed" from="PlayerBody" to="MaskAttachParent" method="_on_player_body_frame_changed"]
[connection signal="body_entered" from="AttackArea" to="." method="_on_attack_area_body_entered"]
[connection signal="button_down" from="MobileControlsLayer/Control/Button" to="CanvasLayer/Interface" method="toggle_pause_menu"]
